# canon.c
```C
#include <termios.h>

#include "tlpi_hdr.h"


int
main(int argc, char* argv[])
{
    struct termios t;
    int time, min;

    if (tcgetattr(STDIN_FILENO, &t) == -1) {
        fprintf(stderr ,"Standard input isn't connected to a terminal\n");
        exit(EXIT_FAILURE);
    }

    if ((t.c_lflag & ICANON)) {
        printf("Standard input is in canonical mode\n");
    } else {
        time = t.c_cc[VTIME];
        min = t.c_cc[VMIN];
        printf("Standard input is in noncanonical mode (TIME = %d, MIN = %d)\n", time, min);
    }
}

```

# Testing

Normal terminal - "canonical mode"
```
$ ./canon
Standard input is in canonical mode
```

Non-terminal - error message
```
$ ./canon < /dev/null
Standard input isn't connected to a terminal
```

Noncanonical mode
```
$ stty cbreak; ./canon
Standard input is in noncanonical mode (TIME = 0, MIN = 1)
```

Reset terminal to normal (though it seem zsh restores to canonical mode automatically)
```
stty sane
```
