## svshm_mon.c
```C
#define _GNU_SOURCE
#include <sys/types.h>
#include <sys/shm.h>
#include <time.h>
#include "tlpi_hdr.h"

int
main(int argc, char *argv[])
{
    struct shmid_ds ds;
    int shmid;

    if (argc != 2 || strcmp(argv[1], "--help") == 0)
        usageErr("%s <shmid>\n", argv[0]);

    shmid = getInt(argv[1], 0, "shmid");

    if (shmctl(shmid, IPC_STAT, &ds) == -1)
        errExit("shmctl-IPC_STAT");

    /* Permissions */
    printf("Owner UID / GID          %ld / %ld\n",
           (long) ds.shm_perm.uid, (long) ds.shm_perm.gid);
    printf("Creator UID / GID        %ld / %ld\n",
           (long) ds.shm_perm.cuid, (long) ds.shm_perm.cgid);
    printf("Mode (octal)             %o\n", ds.shm_perm.mode & 0777);

#ifdef SHM_DEST
    printf("SHM_DEST flag            %s\n",
           (ds.shm_perm.mode & SHM_DEST) ? "on" : "off");
#endif
#ifdef SHM_LOCKED
    printf("SHM_LOCKED flag          %s\n",
           (ds.shm_perm.mode & SHM_LOCKED) ? "on" : "off");
#endif

    /* Core statistics */
    printf("Segment size             %zu bytes\n", ds.shm_segsz);

    printf("Last shmat():            %s", ctime(&ds.shm_atime));
    printf("Last shmdt():            %s", ctime(&ds.shm_dtime));
    printf("Last change:             %s", ctime(&ds.shm_ctime));

    printf("Creator PID              %ld\n", (long) ds.shm_cpid);
    printf("Last-op PID              %ld\n", (long) ds.shm_lpid);
    printf("Attached processes       %ld\n", (long) ds.shm_nattch);

    exit(EXIT_SUCCESS);
}

```

## Testing
I happened to have VSCode using System V shared memory (what are the odds.. right?):
```
$ ipcs -m

------ Shared Memory Segments --------
key        shmid      owner      perms      bytes      nattch     status      
0x00000000 10         debian     600        524288     2          dest         

$ lsipc -m -i 10 | grep command
Creator command:                    /usr/share/code/code
```

I tested `svshm_mon` on the id of this shared memory instance:
```
$ ./svshm_mon 10
Owner UID / GID          1000 / 1000
Creator UID / GID        1000 / 1000
Mode (octal)             600
SHM_DEST flag            on
SHM_LOCKED flag          off
Segment size             524288 bytes
Last shmat():            Sun Jul 13 22:19:57 2025
Last shmdt():            Sun Jul 13 22:19:57 2025
Last change:             Wed Jul  9 09:06:14 2025
Creator PID              2687
Last-op PID              42854
Attached processes       2

```
